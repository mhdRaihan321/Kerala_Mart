<!-- orders.handlebars -->
<section>
  {{#if orders.length}}
  <div class="container mt-5">
    <a href="/" class="btn btn-warning mb-4 text-dark" style="font-weight: bold;">
      <i class="fa-regular fa-circle-left fa-xl" style="color: #000000;"></i> Back
    </a>
    <h1 class="text-center mb-4">Your Orders</h1>
    <table class="table table-striped table-hover mt-5" id="productsTable">
      <thead class="thead-dark">
        <tr>
          <th scope="col">No</th>
          <th scope="col">Date</th>
          <th scope="col">Item Name</th>
          <th scope="col">Quantity</th>
          <th scope="col">Address</th>
          <th scope="col">Mobile</th>
          <th scope="col">Amount</th>
          <th scope="col">Payment</th>
          <th scope="col">Status</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#each orders}}
        <tr>
          <th scope="row">{{@index}}</th>
          <td>{{formatDate this.createdAt}}</td>
          <td>
            {{#each this.products}}
              <p>{{this.productName}}</p>
            {{/each}}
          </td>
          <td>
            {{#each this.products}}
              <p>{{this.quantity}}</p>
            {{/each}}
          </td>
          <td>{{this.deliveryDetails.address}}</td>
          <td>{{this.deliveryDetails.mobile}}</td>
          <td>{{this.total}}â‚¹</td>
          <td>{{this.paymentMethod}}</td>
          <td>{{this.status}}</td>
          <td>
            {{#if (isCancelled this.status)}}
            <span class="text-danger font-weight-bold">Cancelled Item Refund Is Going On</span>
            {{else}}
            <a href="/view-order-products/{{this._id}}" class="btn btn-primary">View Products</a>
            {{/if}}
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
  {{else}}
  <div class="row" style="margin-top: 100px; display: flex; align-items: center; flex-direction: column;">
    <h1 class="text-center font-weight-bold" style="font-size: xx-large;">Order is empty</h1>
    <br>
    <a style="max-width: 140px;" href="/" class="btn btn-primary text-center">Back To Home</a>
  </div>
  {{/if}}
</section>

<script>
$(document).ready( function () {
    $('#productsTable').DataTable();
});
</script>

<style>
  div.dt-container select.dt-input {
    padding: 4px;
    margin-right: 10px;
}
  div.dt-container .dt-search input {
    border: 1px solid #aaa;
    border-radius: 3px;
    padding: 5px;
    background-color: transparent;
    color: inherit;
    margin-left: 8px;
  }
  .container {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    box-shadow:1px 10px 4px 13px rgb(240 2 2 / 10%);
  }

  h1 {
    font-size: 2.5rem;
    color: #343a40;
  }

  .table {
    margin-top: 20px;
  }

  .thead-dark th {
    background-color: #343a40;
    color: #fff;
  }

  .btn-primary {
    background-color: #007bff;
    border-color: #007bff;
  }

  .btn-warning {
    background-color: #ffc107;
    border-color: #ffc107;
  }

  .btn-warning:hover {
    background-color: #e0a800;
    border-color: #d39e00;
  }

  .text-danger {
    color: #dc3545 !important;
  }

  .font-weight-bold {
    font-weight: bold !important;
  }

  .text-center {
    text-align: center !important;
  }

  .text-dark {
    color: #343a40 !important;
  }
</style>
